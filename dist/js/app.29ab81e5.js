(function(){"use strict";var e={585:function(e,t,n){var r=n(963),a=n(252);function o(e,t){const n=(0,a.up)("Base");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(n)])}var i=n(744);const s={},u=(0,i.Z)(s,[["render",o]]);var d=u;const c=e=>((0,a.dD)("data-v-1bdaeaf4"),e=e(),(0,a.Cn)(),e),l={class:"add-menu"},h=c((()=>(0,a._)("h3",null," Coin ",-1))),p={class:"input-container"},m=(0,a.Uk)("Add");function f(e,t,n,o,i,s){const u=(0,a.up)("StyledInput"),d=(0,a.up)("StyledButton");return(0,a.wg)(),(0,a.iD)("div",l,[h,(0,a._)("div",p,[(0,a._)("form",{onSubmit:t[1]||(t[1]=(0,r.iM)((()=>{}),["prevent"]))},[(0,a.Wm)(u,{value:i.name,onInput:t[0]||(t[0]=e=>i.name=e.target.value),placeholder:"Coin"},null,8,["value"]),(0,a.Wm)(d,{onKeydown:(0,r.D2)(s.onSubmit,["enter"]),onClick:s.onSubmit},{default:(0,a.w5)((()=>[m])),_:1},8,["onKeydown","onClick"])],32)])])}var v={name:"AddMenu",data(){return{name:""}},methods:{onSubmit(){this.$emit("addCard",this.name.toUpperCase()),this.name=""}}};const g=(0,i.Z)(v,[["render",f],["__scopeId","data-v-1bdaeaf4"]]);var w=g;const y={class:"container"},C=(0,a.Uk)("Update");function k(e,t,n,r,o,i){const s=(0,a.up)("AddMenu"),u=(0,a.up)("CardContainer"),d=(0,a.up)("StyledButton");return(0,a.wg)(),(0,a.iD)("div",y,[(0,a.Wm)(s,{onAddCard:i.addCard},null,8,["onAddCard"]),(0,a.Wm)(u,{onDeleteCard:i.deleteCard,cards:o.coins},null,8,["onDeleteCard","cards"]),(0,a.Wm)(d,{onClick:i.updatePrice},{default:(0,a.w5)((()=>[C])),_:1},8,["onClick"])])}var b=n(669),_=n.n(b);const D="coins",S="a95992a47639a84e615747d806241b2b00d7514529d74a6ec85e0b4c5c1cf008";async function I(e){if(console.log(e),0===e.length)return[];const t=[],n="https://min-api.cryptocompare.com/data/pricemulti?fsyms="+L(e)+"&tsyms=USD&api_key="+S;let r;try{r=await _().get(n)}catch(a){}for(const o of e){const e=r.data[o.name]["USD"];t.push({name:o.name,price:e})}return t}function A(){let e=localStorage.getItem(D);return null==e?"":(e=e.trim(),""!==e?e.split(","):"")}function O(e){const t=L(e);localStorage.setItem(D,t)}function L(e){let t="";return e.forEach((e=>t+=e.name+",")),t=t.slice(0,-1),t}var U={name:"Base",data(){return{coins:[]}},methods:{deleteCard(e){this.coins=this.coins.filter((t=>t.name!==e))},addCard(e){this.coins.find((t=>t.name===e))||""===e.trim()||(this.coins.push({name:e,price:"-"}),this.updatePrice(),O(this.coins))},updatePrice(){I(this.coins).then((e=>{for(let t=0;t<e.length;t++)this.coins.find((n=>n.name===e[t].name)).price=e[t].price}))},setup(){const e=A();""!==e&&e.forEach((e=>this.coins.push({name:e,price:"-"})))}},mounted(){this.setup(),this.updatePrice()}};const W=(0,i.Z)(U,[["render",k]]);var j=W,B=n(577);const T={class:"card"},Z=(0,a.Uk)("Delete");function P(e,t,n,r,o,i){const s=(0,a.up)("StyledButton");return(0,a.wg)(),(0,a.iD)("div",T,[(0,a._)("h4",null,(0,B.zw)(n.card.price),1),(0,a._)("p",null,(0,B.zw)(n.card.name),1),(0,a.Wm)(s,{onClick:t[0]||(t[0]=e=>i.deleteCard(n.card.name)),class:"btn"},{default:(0,a.w5)((()=>[Z])),_:1})])}var q={name:"Card",props:{card:{type:Object,require:!0}},data(){return{}},methods:{deleteCard(e){this.$emit("deleteCard",e)}}};const M=(0,i.Z)(q,[["render",P],["__scopeId","data-v-41b06732"]]);var K=M;const x=e=>((0,a.dD)("data-v-63078616"),e=e(),(0,a.Cn)(),e),z={key:0,class:"cards-container"},E=x((()=>(0,a._)("hr",null,null,-1))),$={class:"cards-list"},J=x((()=>(0,a._)("hr",null,null,-1)));function F(e,t,n,r,o,i){const s=(0,a.up)("Card");return n.cards.length?((0,a.wg)(),(0,a.iD)("div",z,[E,(0,a._)("div",$,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.cards,(e=>((0,a.wg)(),(0,a.j4)(s,{onDeleteCard:i.deleteCard,card:e,key:e.name},null,8,["onDeleteCard","card"])))),128))]),J])):(0,a.kq)("",!0)}var H={name:"CardContainer",props:{cards:{type:Array,require:!0}},data(){return{}},methods:{deleteCard(e){this.$emit("deleteCard",e)}}};const Y=(0,i.Z)(H,[["render",F],["__scopeId","data-v-63078616"]]);var G=Y;function N(e,t,n,r,o,i){return(0,a.wg)(),(0,a.iD)("button",null,[(0,a.WI)(e.$slots,"default",{},void 0,!0)])}var Q={name:"StyledButton"};const R=(0,i.Z)(Q,[["render",N],["__scopeId","data-v-4c3f81b0"]]);var V=R;function X(e,t,n,r,o,i){return(0,a.wg)(),(0,a.iD)("input")}var ee={name:"StyledInput"};const te=(0,i.Z)(ee,[["render",X],["__scopeId","data-v-72942fec"]]);var ne=te;const re={class:"login"},ae=(0,a.Uk)("Login"),oe={key:1},ie={key:2};function se(e,t,n,o,i,s){const u=(0,a.up)("StyledInput"),d=(0,a.up)("StyledButton");return(0,a.wg)(),(0,a.iD)("div",re,[i.isLoading||e.isAuth?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("form",{key:0,onSubmit:t[2]||(t[2]=(0,r.iM)((()=>{}),["prevent"]))},[(0,a.Wm)(u,{placeholder:"Username",value:i.user.username,onInput:t[0]||(t[0]=e=>i.user.username=e.target.value)},null,8,["value"]),(0,a.Wm)(u,{type:"password",placeholder:"Password",value:i.user.password,onInput:t[1]||(t[1]=e=>i.user.password=e.target.value)},null,8,["value"]),(0,a.Wm)(d,{onKeydown:(0,r.D2)(s.login,["enter"]),onClick:s.submit},{default:(0,a.w5)((()=>[ae])),_:1},8,["onKeydown","onClick"])],32)),i.isLoading?((0,a.wg)(),(0,a.iD)("p",oe,"Loading")):(0,a.kq)("",!0),e.isAuth?((0,a.wg)(),(0,a.iD)("p",ie,(0,B.zw)(e.username),1)):(0,a.kq)("",!0)])}var ue=n(907);const de="https://localhost:7252";var ce={name:"Login",data(){return{user:{username:"",password:""},isLoading:!1}},methods:{submit(){this.login(this.user),this.user.password="",this.user.username=""},login(e){this.isLoading=!0,_().post(de+"/api/login",e).then((e=>this.auth(e))).catch((()=>this.setAuth(!1))).finally((()=>this.isLoading=!1))},tryLoginByJwt(e){this.isLoading=!0,_().get(de+"api/login",{headers:{Authorization:"Bearer "+e}}).then((e=>this.auth(e))).catch((()=>this.setAuth(!1))).finally((()=>this.isLoading=!1))},auth(e){this.saveToken(e.token),this.setUsername(e.username()),this.setAuth(!0)},saveToken(e){this.setToken(e),localStorage.setItem("jwt",e)},...(0,ue.OI)({setAuth:"setAuth",setToken:"setToken",setUsername:"setUsername"})},mounted(){this.tryLoginByJwt(this.token)},computed:{...(0,ue.rn)({isAuth:e=>e.isAuth,username:e=>e.username,token:e=>e.jwt}),...(0,ue.Se)({coins:"coinsString"})}};const le=(0,i.Z)(ce,[["render",se],["__scopeId","data-v-6f949da8"]]);var he=le,pe=[w,j,K,G,V,ne,he],me=(0,ue.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}});const fe=(0,r.ri)(d);pe.forEach((e=>fe.component(e.name,e))),fe.use(me).mount("#app")}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,r,a,o){if(!r){var i=1/0;for(c=0;c<e.length;c++){r=e[c][0],a=e[c][1],o=e[c][2];for(var s=!0,u=0;u<r.length;u++)(!1&o||i>=o)&&Object.keys(n.O).every((function(e){return n.O[e](r[u])}))?r.splice(u--,1):(s=!1,o<i&&(i=o));if(s){e.splice(c--,1);var d=a();void 0!==d&&(t=d)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[r,a,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,o,i=r[0],s=r[1],u=r[2],d=0;if(i.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(u)var c=u(n)}for(t&&t(r);d<i.length;d++)o=i[d],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(c)},r=self["webpackChunkvue_learn"]=self["webpackChunkvue_learn"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(585)}));r=n.O(r)})();
//# sourceMappingURL=app.29ab81e5.js.map